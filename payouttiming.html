<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Payout timing &mdash; Tezos Reward Distributor (TRD) 9.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Plugins" href="plugins.html" />
    <link rel="prev" title="How to run TRD in Docker" href="rundocker.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Tezos Reward Distributor (TRD)
          </a>
              <div class="version">
                9.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Content:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">How to get and install TRD?</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">How to configure TRD?</a></li>
<li class="toctree-l1"><a class="reference internal" href="paymentaddress.html">Payment Address</a></li>
<li class="toctree-l1"><a class="reference internal" href="tezossigner.html">How to use the Tezos Signer</a></li>
<li class="toctree-l1"><a class="reference internal" href="run.html">How to run TRD</a></li>
<li class="toctree-l1"><a class="reference internal" href="rundocker.html">How to run TRD in Docker</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Payout timing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#adjusted-early-payouts">Adjusted early payouts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="linuxservice.html">Run as Linux Service (WIP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="state_machine.html">TRD State Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributors.html">For Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="statistics.html">Anonymous Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="codeofconduct.html">Contributor Covenant Code of Conduct</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Tezos Reward Distributor (TRD)</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Payout timing</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/payouttiming.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="payout-timing">
<span id="id1"></span><h1>Payout timing<a class="headerlink" href="#payout-timing" title="Permalink to this headline"></a></h1>
<p>Tezos rewards are paid out by the protocol at the end of a given cycle,
and are unfrozen 5 cycles later.</p>
<p>Should the baker decide to pay out rewards after they are unfrozen,
their delegators will have to wait 12 cycles to get their first payout.</p>
<p>This is TRD default behavior, however many bakers elect to pay out
rewards before they are unfrozen.</p>
<p>Bakers may elect to pay their delegators early to appear more
competitive or trustworthy. But bakers paying early effectively give an “advance” to their delegators.
This means that they have a lower balance at any given point in time.</p>
<p>TRD behavior is to pay out the last released payment cycle. Last
released payment cycle will be calculated based on the formula:
<code class="docutils literal notranslate"><span class="pre">current_cycle</span> <span class="pre">-</span> <span class="pre">(NB_FREEZE_CYCLE+1)</span> <span class="pre">-</span> <span class="pre">release_override</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">NB_FREEZE_CYCLE</span></code> is 5 on mainnet. A cycle on mainnet lasts 3 days.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--release_override</span></code> <code class="docutils literal notranslate"><span class="pre">-R</span></code> parameter lets the baker override when rewards
are released (paid out). Its default value is 0.</p>
<p>Possible choices are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code>: pay rewards when they are unfrozen - 11 to 12 cycles after delegation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-5</span></code>: pay rewards after the cycle runs (a popular choice amongst bakers) - 7 to 8 cycles after delegation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-11</span></code>: pay rewards when baking rights are assigned, referred as “adjusted
early payouts” (see below) - 2 to 3 cycles after delegation.</p></li>
</ul>
<div class="section" id="adjusted-early-payouts">
<h2>Adjusted early payouts<a class="headerlink" href="#adjusted-early-payouts" title="Permalink to this headline"></a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">release_override</span></code> of <code class="docutils literal notranslate"><span class="pre">-11</span></code> will trigger adjusted early payouts.</p>
<p>When selected, this option calculates and pays out the expected rewards based on baking and
endorsing rights only. It does not takes into account fee income,
denunciation income or rescued block income. It also assumes perfect
behavior of the baker and other bakers.</p>
<p>The resulting rewards are thus an estimation. When the cycle
actually runs, TRD runs the calculations for this cycle again, based on
the rewards type configured (ideal or actual). It then computes the
“overestimate” or overpaid value.</p>
<p>TRD then attempts to claim back this overestimate by adjusting the
amount paid. <strong>This does not always work</strong>. If the delegator has emptied
their account or changed delegate, there is no longer any payout to
offset a past overestimate. Thus, users are advised caution when using
this feature.</p>
<p>The estimate can also be lower than the final amount, for example if fees were earned in excess of the missed income, or if blocks have been rescued by the baker. In this case, the overestimate will show a negative amount, the delegator has been underpaid and will be compensated with a positive adjustment.</p>
<p>Overestimate, adjustment and adjusted amount paid can be seen in the
calculations CSV file.</p>
<p><strong>Example:</strong></p>
<p><strong>Cycle 100</strong>: Frank and Cindy both delegate 1000 tez to Jane’s bakery. For
simplicity, Jane’s bakery has no fee and no other delegators. Her bakery is
configured with a <code class="docutils literal notranslate"><span class="pre">release_override</span></code> of <code class="docutils literal notranslate"><span class="pre">-11</span></code> and <code class="docutils literal notranslate"><span class="pre">rewards_type</span></code> <code class="docutils literal notranslate"><span class="pre">actual</span></code>.</p>
<p><strong>Cycle 103</strong>: Since <code class="docutils literal notranslate"><span class="pre">release_override</span></code> is set to <code class="docutils literal notranslate"><span class="pre">-11</span></code>, payout for cycle 108 happens during cycle 103. Frank and Cindy’s delegation is taken into account to compute
cylce 108’s rights. Jane’s bakery is expected to earn 25 tez rewards for
cycle 108 from baking and endorsing rewards. Frank and Cindy contribute 10% each to Jane’s staking
balance. They each receive 2.5 tez as part of the payout for cycle 108.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">calculations/108.csv</span></code> file is generated which shows <code class="docutils literal notranslate"><span class="pre">Overestimate:</span>
<span class="pre">pending</span></code> as cycle 108 has not run yet.</p>
<p><strong>Cycle 104-108</strong>: same as cycle 103: Frank and Cindy receive 10% each of the estimated reward..</p>
<p><strong>Cycle 109</strong>: Jane’s bakery is expected to earn 15 tez from baking and endorsing rewards for cycle 114, so
each delegator should be paid 1.5 tez. TRD runs the calculations for
cycle 108 again and finds that Jane earned 0.5 tez fee for baking a
block. She also missed some endorsements and did not earn 0.75 tez.
Overall, Jane’s bakery overestimated its earnings by 0.25 tez, or 1%.
It therefore substracts 1% of cycle 108 payout to cycle 114 payout (which happens at cycle 109).
Frank and Cindy receive 1.475 tez as adjusted amount for cycle 114.</p>
<p><code class="docutils literal notranslate"><span class="pre">calculations/108.csv</span></code> file is updated with a total overestimate of 0.25
and their distribution across delegates: 0.025 tez for Frank and for
Cindy. <code class="docutils literal notranslate"><span class="pre">calculations/114.csv</span></code> file mentions an adjustment of 0.025 tez for
Frank and Cindy.</p>
<p>Had Frank left the bakery at cycle 104, Jane’s bakery would have been
unable to recover his overpaid 0.025 tez.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="rundocker.html" class="btn btn-neutral float-left" title="How to run TRD in Docker" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="plugins.html" class="btn btn-neutral float-right" title="Plugins" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, see contributors.csv.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>